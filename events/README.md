# Сервис "Events"

Сервис "Events" предоставляет API для управления событиями и статистикой.

## API Эндпоинты

### События

- `GET /api/events/events`:
  - Получить список всех событий.
  - Параметры запроса:
    - `category` (опционально, str) - фильтр по категории события
    - `status` (опционально, str) - фильтр по статусу события
    - `date_from` (опционально, date) - фильтр по дате начала (события с датой >= date_from)
    - `date_to` (опционально, date) - фильтр по дате окончания (события с датой <= date_to)
    - `skip` (по умолчанию: 0) - количество пропускаемых записей
    - `limit` (по умолчанию: 100) - лимит записей
  - Возвращает список объектов `Event`, отсортированных по дате события (от ранних к поздним).
  - Требует аутентификации.

- `GET /api/events/events/{event_id}`:
  - Получить событие по его ID.
  - Возвращает объект `Event`.
  - Выдает ошибку 404, если событие не найдено.

- `POST /api/events/events`:
  - Создать новое событие.
  - Принимает объект `EventCreate` с полями:
    - `title` (str) - название события
    - `description` (str, опционально) - описание события
    - `date` (date) - дата события
    - `time` (str) - время события
    - `location` (str) - место проведения
    - `category` (str) - категория события
    - `image_url` (str, опционально) - URL изображения события
    - `max_participants` (int, опционально) - максимальное количество участников
    - `registration_url` (str, опционально) - URL для регистрации
    - `status` (str, по умолчанию: "published") - статус события
    - `tags` (str, опционально) - теги события
    - `participants_count` (int, по умолчанию: 0) - количество участников
    - `organizer` (str, опционально) - организатор события
  - Возвращает созданный объект `Event`.

- `PUT /api/events/events/{event_id}`:
  - Обновить существующее событие по его ID.
  - Принимает объект `EventUpdate` с опциональными полями:
    - `title` (str, опционально) - новое название события
    - `description` (str, опционально) - новое описание
    - `date` (date или str в формате ISO, опционально) - новая дата события
    - `time` (str, опционально) - новое время события
    - `location` (str, опционально) - новое место проведения
    - `category` (str, опционально) - новая категория
    - `image_url` (str, опционально) - новый URL изображения
    - `max_participants` (int, опционально) - новое максимальное количество участников
    - `registration_url` (str, опционально) - новый URL для регистрации
    - `status` (str, опционально) - новый статус события
    - `tags` (str, опционально) - новые теги
    - `participants_count` (int, опционально) - новое количество участников
    - `organizer` (str, опционально) - новый организатор
  - Возвращает обновленный объект `Event`.
  - Выдает ошибку 404, если событие не найдено.
  - Требует аутентификации.

- `DELETE /api/events/events/{event_id}`:
  - Удалить событие по его ID.
  - Возвращает сообщение об успешном удалении: `{"message": "Event deleted successfully"}`.
  - Выдает ошибку 404, если событие не найдено.

### Статистика

- `GET /api/events/statistics`:
  - Получить статистику по событиям.
  - Возвращает объект `EventStatistics` с полями:
    - `total_events` - общее количество событий
    - `published_events` - количество событий со статусом "published"
    - `completed_events` - количество событий со статусом "completed"
    - `events_by_category` - словарь с количеством событий по категориям

### Служебные эндпоинты

- `GET /`:
  - Информация о сервисе.
  - Возвращает объект с полями: `service`, `version`, `status`.

- `GET /health`:
  - Проверка здоровья сервиса.
  - Возвращает объект с полем `status: "healthy"`.

## Особенности

- **Статусы событий**: 
  - `published` - опубликовано (статус по умолчанию)
  - `completed` - завершено
  - Другие статусы могут быть определены пользователем
- **Фильтрация по датам**: Поддерживается фильтрация событий по диапазону дат через параметры `date_from` и `date_to`.
- **Сортировка**: События сортируются по дате (от ранних к поздним).
- **Аутентификация**: Большинство эндпоинтов требуют аутентификации через токен (кроме GET запросов к отдельным ресурсам и служебных эндпоинтов).
- **Формат даты**: При обновлении события поле `date` может быть передано как объект date или строка в формате ISO (YYYY-MM-DD).
