# MAX EDU Frontend

Веб-приложение для управления образовательной системой MAX EDU. Фронтенд построен на React с использованием Vite, Tailwind CSS и React Router для создания современного одностраничного приложения (SPA).

## Технологический стек

- **React 19.2.0** - библиотека для построения пользовательского интерфейса
- **React Router DOM 7.9.3** - маршрутизация в одностраничном приложении
- **Vite 7.1.9** - быстрый сборщик и dev-сервер
- **Tailwind CSS 3.4.18** - утилитарный CSS-фреймворк для стилизации
- **PostCSS & Autoprefixer** - обработка CSS

## Архитектура

### Структура проекта

```
frontend/
├── src/
│   ├── components/          # Переиспользуемые компоненты
│   │   ├── Layout.jsx      # Основной layout с боковой панелью
│   │   ├── LeftSideBar.jsx # Левая боковая панель навигации
│   │   ├── ProtectedRoute.jsx # Компонент защиты маршрутов
│   │   └── ui/             # UI компоненты
│   ├── pages/              # Страницы приложения
│   │   ├── Auth/           # Страницы аутентификации
│   │   ├── sections/       # Разделы приложения
│   │   │   ├── applicants/ # Абитуриенты
│   │   │   ├── certificates/ # Сертификаты
│   │   │   ├── events/     # Мероприятия
│   │   │   ├── library/    # Библиотека
│   │   │   ├── management/ # Управление (студенты/преподаватели)
│   │   │   └── timetable/  # Расписание
│   │   ├── HomePage.jsx    # Главная страница
│   │   ├── ProfilePage.jsx # Профиль пользователя
│   │   └── ...
│   ├── services/           # Сервисы для работы с API
│   │   ├── authService.js
│   │   ├── applicantsService.js
│   │   ├── certificatesService.js
│   │   ├── eventsService.js
│   │   ├── libraryService.js
│   │   ├── staffService.js
│   │   └── timetableService.js
│   ├── config/             # Конфигурация
│   │   └── api.js         # Настройки API и эндпоинтов
│   ├── context/            # React Context
│   │   └── AuthContext.jsx # Контекст аутентификации
│   ├── data/              # Моковые данные
│   │   └── mockSectionsAndFunctions.js
│   ├── App.jsx            # Главный компонент приложения
│   └── main.jsx           # Точка входа
├── public/                # Статические файлы
├── Dockerfile             # Конфигурация Docker
├── nginx.conf             # Конфигурация Nginx
└── package.json          # Зависимости проекта
```

## Основные разделы приложения

### 1. Управление (Management)
- **Студенты**: CRUD операции для управления студентами
  - Список студентов
  - Поиск студентов
  - Создание, обновление, удаление
- **Преподаватели**: CRUD операции для управления преподавателями
  - Список преподавателей
  - Поиск преподавателей
  - Создание, обновление, удаление
- **Статистика**: Статистика по управлению

### 2. Расписание занятий (Timetable)
- **Расписание**: Управление расписанием занятий
- **Шаблоны**: Шаблоны расписания
- **Изменения**: Изменения в расписании
- CRUD операции для всех подразделов

### 3. Мероприятия (Events)
- **События**: Управление мероприятиями
- **Регистрации**: Регистрации на мероприятия
- **Отзывы**: Отзывы о мероприятиях
- **Статистика**: Статистика по мероприятиям

### 4. Сертификаты (Certificates)
- **Сертификаты**: Управление сертификатами
- **Типы сертификатов**: Управление типами
- **Шаблоны сертификатов**: Управление шаблонами
- **Статистика**: Статистика по сертификатам

### 5. Абитуриентам (Applicants)
- **Заявления**: Управление заявлениями абитуриентов
- **Документы**: Управление документами
- **Экзамены**: Управление результатами экзаменов
- **Статистика**: Статистика по абитуриентам

### 6. Библиотека (Library)
- **Книги**: Управление книгами
- **Выдачи**: Управление выдачами книг
- **Резервации**: Управление резервациями
- **Отзывы**: Отзывы о книгах
- **Статистика**: Статистика библиотеки

## Аутентификация

Приложение использует JWT-токены для аутентификации:

- **Токен хранится** в `localStorage` под ключом `authToken`
- **Автоматическая проверка** токена при загрузке приложения
- **Защищенные маршруты** через компонент `ProtectedRoute`
- **Автоматический редирект** на `/login` при отсутствии токена или ошибке 401
- **Контекст аутентификации** (`AuthContext`) для управления состоянием пользователя

### Страницы аутентификации

- `/login` - Страница входа
- `/register` - Страница регистрации

## API интеграция

Приложение интегрируется с микросервисной архитектурой через следующие сервисы:

### Микросервисы и порты

- **Auth**: `8001` - Аутентификация и авторизация
- **Staff**: `8002` - Управление персоналом (студенты/преподаватели)
- **Timetable**: `8003` - Расписание занятий
- **Applicants**: `8004` - Абитуриенты
- **Events**: `8005` - Мероприятия
- **Library**: `8006` - Библиотека
- **Certificates**: `8007` - Сертификаты

### Конфигурация API

Базовый URL API определяется автоматически:
- Если задана переменная окружения `VITE_API_BASE_URL`, используется она
- Иначе используется текущий хост (для production) или `http://localhost` (для разработки)

Все запросы к API включают заголовок `Authorization: Bearer {token}` через функцию `fetchWithAuth`.

## Маршрутизация

Приложение использует React Router для навигации:

- **Защищенные маршруты**: Все маршруты кроме `/login` и `/register` требуют аутентификации
- **Вложенные маршруты**: Используется структура вложенных маршрутов для организации разделов
- **Layout**: Основной layout применяется ко всем защищенным маршрутам

### Основные маршруты

- `/` - Главная страница
- `/section/:sectionId` - Страница раздела
- `/section/{sectionName}` - Главная страница раздела
- `/section/{sectionName}/{entity}/list` - Список сущностей
- `/section/{sectionName}/{entity}/create` - Создание сущности
- `/section/{sectionName}/{entity}/update` - Обновление сущности
- `/section/{sectionName}/{entity}/delete` - Удаление сущности
- `/section/{sectionName}/{entity}/details` - Детали сущности
- `/profile` - Профиль пользователя
- `/event/:eventId` - Страница мероприятия
- `/search` - Поиск
- `/admin/post` - Административная панель

## UI/UX

### Дизайн

- **Современный градиентный дизайн** с использованием Tailwind CSS
- **Адаптивная верстка** с поддержкой мобильных устройств
- **Боковая панель навигации** с иконками разделов
- **Анимации и переходы** для улучшения пользовательского опыта

### Компоненты

- **Layout**: Основной layout с боковой панелью и header
- **LeftSideBar**: Боковая панель с навигацией по разделам
- **ProtectedRoute**: Компонент для защиты маршрутов
- **InDevelopment**: Компонент для страниц в разработке

## Разработка

### Установка зависимостей

```bash
npm install
```

### Запуск в режиме разработки

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173` (или другому порту, указанному Vite).

### Сборка для production

```bash
npm run build
```

Собранные файлы будут находиться в директории `dist/`.

### Предпросмотр production сборки

```bash
npm run preview
```

## Docker

Приложение может быть развернуто через Docker:

### Сборка образа

```bash
docker build -t max-edu-frontend .
```

### Запуск контейнера

```bash
docker run -p 80:80 max-edu-frontend
```

### Docker Compose

Приложение интегрировано в общий `docker-compose.yml` проекта и запускается вместе с остальными сервисами.

## Nginx конфигурация

Приложение использует Nginx для раздачи статических файлов в production:

- **SPA routing**: Все запросы перенаправляются на `index.html` для поддержки клиентской маршрутизации
- **Gzip compression**: Включено сжатие для оптимизации размера передаваемых данных
- **Кэширование**: Статические ресурсы кэшируются на 1 год
- **Безопасность**: Добавлены заголовки безопасности (X-Frame-Options, X-Content-Type-Options, X-XSS-Protection)

## Переменные окружения

- `VITE_API_BASE_URL` - Базовый URL для API (опционально)

## Особенности

- **Автоматическое определение API URL**: Приложение автоматически определяет базовый URL API на основе текущего хоста
- **Обработка ошибок 401**: При получении ошибки 401 токен автоматически удаляется и пользователь перенаправляется на страницу входа
- **Защита маршрутов**: Все маршруты кроме страниц аутентификации защищены и требуют валидный токен
- **Мобильная адаптация**: Полная поддержка мобильных устройств с адаптивным меню
- **Оптимизация производительности**: Использование Vite для быстрой сборки и hot module replacement в режиме разработки

## Структура компонентов страниц

Каждая страница раздела обычно содержит следующие компоненты:

- **List** - Список сущностей с возможностью фильтрации и поиска
- **Details** - Детальная информация о сущности
- **Create** - Форма создания новой сущности
- **Update** - Форма обновления существующей сущности
- **Delete** - Подтверждение и удаление сущности

## Дальнейшее развитие

- Добавление тестов (Jest, React Testing Library)
- Интеграция с системой уведомлений
- Улучшение обработки ошибок
- Добавление индикаторов загрузки
- Оптимизация производительности (lazy loading, code splitting)
